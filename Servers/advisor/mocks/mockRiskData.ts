import { IRisk } from "../../domain.layer/interfaces/I.risk";
import { TimeseriesDataPoint } from "../functions/riskFunctions";

/**
 * Comprehensive mock risk data for testing
 * Covers all combinations of severity, likelihood, categories, and lifecycle phases
 */

export const mockRisks: IRisk[] = [
  // Risk 1: Critical, Overdue
  {
    id: 1,
    risk_name: "Data Privacy Breach in Model Training",
    risk_owner: 1,
    ai_lifecycle_phase: "Model development & training",
    risk_description: "Sensitive user data exposed during model training",
    risk_category: ["Data Privacy", "Security"],
    impact: "Severe reputational damage and legal penalties",
    assessment_mapping: "assessment-1",
    controls_mapping: "control-1",
    likelihood: "Likely",
    severity: "Catastrophic",
    risk_level_autocalculated: "Very high risk",
    review_notes: "Requires immediate attention",
    mitigation_status: "In Progress",
    current_risk_level: "Very high risk",
    deadline: new Date('2024-12-01'), // Overdue
    mitigation_plan: "Implement data anonymization",
    implementation_strategy: "Deploy encryption and access controls",
    mitigation_evidence_document: "doc-1.pdf",
    likelihood_mitigation: "Unlikely",
    risk_severity: "Critical",
    final_risk_level: "High",
    risk_approval: 1,
    approval_status: "Pending",
    date_of_assessment: new Date('2024-11-01'),
    created_at: new Date('2024-10-15'),
  },
  // Risk 2: Critical, Not Started
  {
    id: 2,
    risk_name: "Model Bias Leading to Discrimination",
    risk_owner: 2,
    ai_lifecycle_phase: "Model validation & testing",
    risk_description: "Model exhibits bias against protected groups",
    risk_category: ["Fairness", "Ethics"],
    impact: "Legal liability and brand damage",
    assessment_mapping: "assessment-2",
    controls_mapping: "control-2",
    likelihood: "Possible",
    severity: "Catastrophic",
    risk_level_autocalculated: "High risk",
    review_notes: "Bias detected in testing phase",
    mitigation_status: "Not Started",
    current_risk_level: "High risk",
    deadline: new Date('2025-01-15'), // Upcoming
    mitigation_plan: "Implement bias detection and correction",
    implementation_strategy: "Use fairness metrics and diverse datasets",
    mitigation_evidence_document: "doc-2.pdf",
    likelihood_mitigation: "Rare",
    risk_severity: "Critical",
    final_risk_level: "Medium",
    risk_approval: 2,
    approval_status: "Pending",
    date_of_assessment: new Date('2024-11-10'),
    created_at: new Date('2024-10-20'),
  },
  // Risk 3: High, In Progress
  {
    id: 3,
    risk_name: "Model Performance Degradation",
    risk_owner: 1,
    ai_lifecycle_phase: "Monitoring & maintenance",
    risk_description: "Model accuracy decreases over time",
    risk_category: ["Performance", "Reliability"],
    impact: "Reduced accuracy in predictions",
    assessment_mapping: "assessment-3",
    controls_mapping: "control-3",
    likelihood: "Likely",
    severity: "Major",
    risk_level_autocalculated: "High risk",
    review_notes: "Monitoring shows declining performance",
    mitigation_status: "In Progress",
    current_risk_level: "Medium risk",
    deadline: new Date('2025-02-01'),
    mitigation_plan: "Implement retraining pipeline",
    implementation_strategy: "Schedule monthly retraining",
    mitigation_evidence_document: "doc-3.pdf",
    likelihood_mitigation: "Unlikely",
    risk_severity: "Major",
    final_risk_level: "Low",
    risk_approval: 1,
    approval_status: "Approved",
    date_of_assessment: new Date('2024-11-15'),
    created_at: new Date('2024-10-25'),
  },
  // Risk 4: Medium, Completed
  {
    id: 4,
    risk_name: "Insufficient Documentation",
    risk_owner: 3,
    ai_lifecycle_phase: "Deployment & integration",
    risk_description: "Lack of comprehensive model documentation",
    risk_category: ["Documentation", "Compliance"],
    impact: "Difficulty in audits and compliance checks",
    assessment_mapping: "assessment-4",
    controls_mapping: "control-4",
    likelihood: "Possible",
    severity: "Moderate",
    risk_level_autocalculated: "Medium risk",
    review_notes: "Documentation completed",
    mitigation_status: "Completed",
    current_risk_level: "Low risk",
    deadline: new Date('2024-12-15'),
    mitigation_plan: "Create comprehensive documentation",
    implementation_strategy: "Use automated documentation tools",
    mitigation_evidence_document: "doc-4.pdf",
    likelihood_mitigation: "Rare",
    risk_severity: "Moderate",
    final_risk_level: "Very Low",
    risk_approval: 3,
    approval_status: "Approved",
    date_of_assessment: new Date('2024-11-20'),
    created_at: new Date('2024-11-01'),
  },
  // Risk 5: Low, Not Started
  {
    id: 5,
    risk_name: "Minor UI/UX Issues in Dashboard",
    risk_owner: 2,
    ai_lifecycle_phase: "Deployment & integration",
    risk_description: "Small usability issues in monitoring dashboard",
    risk_category: ["User Experience"],
    impact: "Minor inconvenience to users",
    assessment_mapping: "assessment-5",
    controls_mapping: "control-5",
    likelihood: "Unlikely",
    severity: "Minor",
    risk_level_autocalculated: "Low risk",
    review_notes: "Low priority",
    mitigation_status: "Not Started",
    current_risk_level: "Low risk",
    deadline: new Date('2025-03-01'),
    mitigation_plan: "UI improvements",
    implementation_strategy: "Schedule for next sprint",
    mitigation_evidence_document: "doc-5.pdf",
    likelihood_mitigation: "Rare",
    risk_severity: "Minor",
    final_risk_level: "Very Low",
    risk_approval: 2,
    approval_status: "Pending",
    date_of_assessment: new Date('2024-11-25'),
    created_at: new Date('2024-11-05'),
  },
  // Risk 6: Very Low, On Hold
  {
    id: 6,
    risk_name: "Cosmetic Code Quality Issues",
    risk_owner: 3,
    ai_lifecycle_phase: "Model development & training",
    risk_description: "Minor code style inconsistencies",
    risk_category: ["Code Quality"],
    impact: "Minimal impact on functionality",
    assessment_mapping: "assessment-6",
    controls_mapping: "control-6",
    likelihood: "Rare",
    severity: "Negligible",
    risk_level_autocalculated: "Very low risk",
    review_notes: "On hold pending other priorities",
    mitigation_status: "On Hold",
    current_risk_level: "Very Low risk",
    deadline: new Date('2025-04-01'),
    mitigation_plan: "Code linting improvements",
    implementation_strategy: "Automated linting",
    mitigation_evidence_document: "doc-6.pdf",
    likelihood_mitigation: "Rare",
    risk_severity: "Negligible",
    final_risk_level: "No Risk",
    risk_approval: 3,
    approval_status: "Approved",
    date_of_assessment: new Date('2024-11-28'),
    created_at: new Date('2024-11-10'),
  },
  // Risk 7: High, Deferred
  {
    id: 7,
    risk_name: "Third-Party API Dependency Risk",
    risk_owner: 1,
    ai_lifecycle_phase: "Data collection & processing",
    risk_description: "Critical dependency on external API",
    risk_category: ["Infrastructure", "Reliability"],
    impact: "Service disruption if API fails",
    assessment_mapping: "assessment-7",
    controls_mapping: "control-7",
    likelihood: "Possible",
    severity: "Major",
    risk_level_autocalculated: "High risk",
    review_notes: "Deferred to next quarter",
    mitigation_status: "Deferred",
    current_risk_level: "High risk",
    deadline: new Date('2025-05-01'),
    mitigation_plan: "Implement fallback mechanisms",
    implementation_strategy: "Build redundancy",
    mitigation_evidence_document: "doc-7.pdf",
    likelihood_mitigation: "Unlikely",
    risk_severity: "Major",
    final_risk_level: "Medium",
    risk_approval: 1,
    approval_status: "Pending",
    date_of_assessment: new Date('2024-11-30'),
    created_at: new Date('2024-11-12'),
  },
  // Risk 8: Medium, Requires review
  {
    id: 8,
    risk_name: "Incomplete Test Coverage",
    risk_owner: 2,
    ai_lifecycle_phase: "Model validation & testing",
    risk_description: "Some model components lack adequate testing",
    risk_category: ["Testing", "Quality Assurance"],
    impact: "Potential undiscovered bugs",
    assessment_mapping: "assessment-8",
    controls_mapping: "control-8",
    likelihood: "Likely",
    severity: "Moderate",
    risk_level_autocalculated: "Medium risk",
    review_notes: "Requires review of test strategy",
    mitigation_status: "Requires review",
    current_risk_level: "Medium risk",
    deadline: new Date('2025-01-20'),
    mitigation_plan: "Increase test coverage to 90%",
    implementation_strategy: "Write unit and integration tests",
    mitigation_evidence_document: "doc-8.pdf",
    likelihood_mitigation: "Possible",
    risk_severity: "Moderate",
    final_risk_level: "Low",
    risk_approval: 2,
    approval_status: "Pending",
    date_of_assessment: new Date('2024-12-01'),
    created_at: new Date('2024-11-15'),
  },
  // Risk 9: Safety category for diversity
  {
    id: 9,
    risk_name: "Safety-Critical System Failure",
    risk_owner: 1,
    ai_lifecycle_phase: "Deployment & integration",
    risk_description: "Model failure in safety-critical application",
    risk_category: ["Safety", "Compliance"],
    impact: "Potential harm to users",
    assessment_mapping: "assessment-9",
    controls_mapping: "control-9",
    likelihood: "Unlikely",
    severity: "Catastrophic",
    risk_level_autocalculated: "High risk",
    review_notes: "Safety measures implemented",
    mitigation_status: "In Progress",
    current_risk_level: "Medium risk",
    deadline: new Date('2025-01-05'),
    mitigation_plan: "Implement safety checks",
    implementation_strategy: "Multiple validation layers",
    mitigation_evidence_document: "doc-9.pdf",
    likelihood_mitigation: "Rare",
    risk_severity: "Critical",
    final_risk_level: "Low",
    risk_approval: 1,
    approval_status: "Approved",
    date_of_assessment: new Date('2024-12-02'),
    created_at: new Date('2024-11-18'),
  },
  // Risk 10: Problem definition phase for lifecycle diversity
  {
    id: 10,
    risk_name: "Unclear Problem Definition",
    risk_owner: 3,
    ai_lifecycle_phase: "Problem definition & planning",
    risk_description: "Ambiguous project requirements",
    risk_category: ["Planning", "Requirements"],
    impact: "Project delays and rework",
    assessment_mapping: "assessment-10",
    controls_mapping: "control-10",
    likelihood: "Possible",
    severity: "Moderate",
    risk_level_autocalculated: "Medium risk",
    review_notes: "Requirements clarification in progress",
    mitigation_status: "In Progress",
    current_risk_level: "Medium risk",
    deadline: new Date('2024-12-20'),
    mitigation_plan: "Conduct stakeholder workshops",
    implementation_strategy: "Document clear requirements",
    mitigation_evidence_document: "doc-10.pdf",
    likelihood_mitigation: "Unlikely",
    risk_severity: "Moderate",
    final_risk_level: "Low",
    risk_approval: 3,
    approval_status: "Approved",
    date_of_assessment: new Date('2024-12-03'),
    created_at: new Date('2024-11-20'),
  },
];

// Empty dataset for edge case testing
export const mockEmptyRisks: IRisk[] = [];

// Subset of risks for specific project
export const mockProjectRisks: IRisk[] = mockRisks.filter((_, index) => index < 5);

// Subset of risks for specific framework
export const mockFrameworkRisks: IRisk[] = mockRisks.filter((_, index) => index >= 5);

// Mock timeseries data
export const mockTimeseriesData: TimeseriesDataPoint[] = [
  {
    timestamp: new Date('2024-11-01'),
    data: { "Catastrophic": 2, "Major": 3, "Moderate": 4, "Minor": 1, "Negligible": 0 }
  },
  {
    timestamp: new Date('2024-11-08'),
    data: { "Catastrophic": 2, "Major": 4, "Moderate": 3, "Minor": 1, "Negligible": 1 }
  },
  {
    timestamp: new Date('2024-11-15'),
    data: { "Catastrophic": 1, "Major": 4, "Moderate": 4, "Minor": 1, "Negligible": 1 }
  },
  {
    timestamp: new Date('2024-11-22'),
    data: { "Catastrophic": 2, "Major": 3, "Moderate": 3, "Minor": 2, "Negligible": 1 }
  },
  {
    timestamp: new Date('2024-11-29'),
    data: { "Catastrophic": 2, "Major": 3, "Moderate": 3, "Minor": 1, "Negligible": 1 }
  },
  {
    timestamp: new Date('2024-12-03'),
    data: { "Catastrophic": 2, "Major": 3, "Moderate": 3, "Minor": 1, "Negligible": 1 }
  },
];

/**
 * Helper function to create a custom risk for testing
 */
export const createMockRisk = (overrides: Partial<IRisk>): IRisk => {
  return {
    id: 999,
    risk_name: "Test Risk",
    risk_owner: 1,
    ai_lifecycle_phase: "Model development & training",
    risk_description: "Test description",
    risk_category: ["Testing"],
    impact: "Test impact",
    assessment_mapping: "assessment-test",
    controls_mapping: "control-test",
    likelihood: "Possible",
    severity: "Moderate",
    risk_level_autocalculated: "Medium risk",
    review_notes: "Test notes",
    mitigation_status: "Not Started",
    current_risk_level: "Medium risk",
    deadline: new Date('2025-06-01'),
    mitigation_plan: "Test plan",
    implementation_strategy: "Test strategy",
    mitigation_evidence_document: "test-doc.pdf",
    likelihood_mitigation: "Unlikely",
    risk_severity: "Moderate",
    final_risk_level: "Low",
    risk_approval: 1,
    approval_status: "Pending",
    date_of_assessment: new Date('2024-12-03'),
    created_at: new Date('2024-12-03'),
    ...overrides
  };
};
