apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace to deploy resources into
namespace: default

# Resources to deploy (order matters for dependencies)
resources:
  # Namespace (if using a custom namespace, uncomment and update namespace.yaml)
  - namespace.yaml

  # Configuration (apply these first)
  - configmap-generated.yaml
  - secrets-generated.yaml

  # Infrastructure (database and cache)
  - postgres-deployment.yaml
  - redis-deployment.yaml

  # Application services
  - backend-deployment.yaml
  - frontend-deployment.yaml
  - worker-deployment.yaml
  - bias-fairness-deployment.yaml

  # Ingress for external access
  # - ingress.yaml

  # Optional: Uncomment to use custom frontend nginx config
  # - frontend-nginx-config.yaml

# Common labels applied to all resources
commonLabels:
  app: verifywise
  managed-by: kustomize

# Common annotations
commonAnnotations:
  description: "VerifyWise AI Risk & Compliance Platform"

# Images (can be used to override image tags)
images:
  - name: ghcr.io/bluewave-labs/verifywise-backend
    newTag: latest
  - name: ghcr.io/bluewave-labs/verifywise-frontend
    newTag: latest
  - name: ghcr.io/bluewave-labs/verifywise-bias-fairness
    newTag: latest

# ConfigMap generator (optional - alternative to using configmap-generated.yaml)
# Uncomment to generate ConfigMap from .env file directly
# configMapGenerator:
#   - name: verifywise-config
#     envs:
#       - .env.dev

# Secret generator (optional - alternative to using secrets-generated.yaml)
# Uncomment to generate Secret from .env file directly
# secretGenerator:
#   - name: verifywise-secrets
#     envs:
#       - .env.dev

# Replacements can be used to propagate values across resources
# For example, to update the database name across multiple resources

# Patches can be used to customize resources for different environments
# Example patches for different environments:
# patchesStrategicMerge:
#   - patches/production.yaml
#   - patches/staging.yaml

# Resource limits can be adjusted per environment
# This is just an example - actual limits are defined in individual files
